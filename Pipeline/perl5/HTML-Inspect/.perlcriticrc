# Set severity to 'gentle' and then try stern. If we achieve 'harsh' the code is good enough.
#5:gentle;4:stern;3:harsh
severity  = harsh
#only      = 1
#force     = 1
#verbose   = 11
top       = 50
#theme     = (pbp and security and bugs and maintenance and complexity and security)
#include   = NamingConventions ClassHierarchies
#exclude   = Variables  Modules::RequirePackage
#criticism-fatal = 1
#color     = 1
#allow-unsafe = 0
pager     = less

# Perl::Critic::Policy::Subroutines::RequireArgUnpacking - Always unpack @_ first.
[Subroutines::RequireArgUnpacking]
short_subroutine_statements = 4

#XXX NO: return is a superfluous word.
[-Subroutines::RequireFinalReturn]

[-Perl::Critic::Policy::BuiltinFunctions::RequireBlockGrep]
[-Perl::Critic::Policy::BuiltinFunctions::RequireBlockMap]
[Perl::Critic::Policy::ClassHierarchies::ProhibitOneArgBless]
[BuiltinFunctions::RequireGlobFunction]
[Perl::Critic::Policy::CodeLayout::ProhibitHardTabs]
[Perl::Critic::Policy::CodeLayout::ProhibitTrailingWhitespace]
[Perl::Critic::Policy::CodeLayout::RequireConsistentNewlines]
[Perl::Critic::Policy::CodeLayout::RequireTrailingCommas]
[Perl::Critic::Policy::ControlStructures::ProhibitUnreachableCode]
[Perl::Critic::Policy::InputOutput::ProhibitBacktickOperators]
[Perl::Critic::Policy::InputOutput::ProhibitBarewordFileHandles]
[Perl::Critic::Policy::InputOutput::ProhibitTwoArgOpen]
[Perl::Critic::Policy::Miscellanea::ProhibitFormats]

[Variables::ProhibitPackageVars]
#add_packages = Carp

# Shorten allowed length of regexp for more readability.
[RegularExpressions::ProhibitComplexRegexes]
max_characters = 40

[RegularExpressions::RequireExtendedFormatting]
minimum_regex_length_to_complain_about = 30

# Temporarily disable check for prototypes, because signatures are recognisided
# as prototypes. See https://github.com/adamkennedy/PPI/issues/194
# Enable again when the above bug is fixed.
[-Subroutines::ProhibitSubroutinePrototypes]

# Strangely enough, 4 arguments (including $self) in signature are counted as 6
[Subroutines::ProhibitManyArgs]
max_arguments = 7

# This policy does not work well with methods and private methods via 'my'
[-Subroutines::ProhibitBuiltinHomonyms]

[TestingAndDebugging::ProhibitNoWarnings]
allow_with_category_restriction = 1

[Subroutines::ProhibitUnusedPrivateSubroutines]
allow = _refAttributes _xpc

[Subroutines::ProhibitExcessComplexity]
max_mccabe = 22
